(function(){"use strict";const s=window.Vue;function m(){return window.panel}function S(){return m().api}function k(){const r=S();return{load:({parent:t,name:o})=>r.get(`${t}/sections/${o}`)}}const p=s.computed;s.customRef,s.defineAsyncComponent,s.defineComponent,s.effectScope,s.getCurrentInstance,s.getCurrentScope,s.h,s.inject,s.isProxy,s.isReactive,s.isReadonly,s.isRef,s.isShallow,s.markRaw,s.nextTick,s.onActivated,s.onBeforeMount,s.onBeforeUnmount,s.onBeforeUpdate,s.onDeactivated,s.onErrorCaptured;const h=s.onMounted;s.onRenderTracked,s.onRenderTriggered,s.onScopeDispose,s.onServerPrefetch;const w=s.onUnmounted;s.onUpdated,s.provide,s.proxyRefs,s.reactive,s.readonly;const g=s.ref;s.shallowReactive,s.shallowReadonly,s.shallowRef,s.toRaw,s.toRef,s.toRefs,s.triggerRef,s.unref,s.useAttrs,s.useCssModule,s.useCssVars,s.useListeners,s.useSlots;const C=s.watch;s.watchEffect,s.watchPostEffect,s.watchSyncEffect;const b={blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number};function u(r,e,t,o,n,l,_,c){var a=typeof r=="function"?r.options:r;return e&&(a.render=e,a.staticRenderFns=t,a._compiled=!0),{exports:r,options:a}}const y={__name:"heading-structure",props:b,setup(r){const e=r,t=m(),{load:o}=k(),n=g(null),l=p(()=>{var i;return(i=n.value)==null?void 0:i.some((v,d)=>{var f;return v.level>(((f=n.value[d-1])==null?void 0:f.level)??0)+1})}),_=p(()=>{var i;return((i=n.value)==null?void 0:i.filter(v=>v.level===1).length)>1}),c=p(()=>{var i;return((i=n.value)==null?void 0:i.filter(v=>v.level===1).length)===0}),a=()=>o({parent:e.parent,name:e.name}).then(i=>{n.value=i.data}),K=(i,v)=>{var d;return!!(i.level>(((d=n.value[v-1])==null?void 0:d.level)??0)+1||i.level===1&&n.value[v-1]||i.level===1&&n.value.filter(f=>f.level===1).length>1)};return h(()=>{a(),t.events.on("content.save",i=>{a()})}),w(()=>t.events.off("content.save")),{__sfc:!0,props:e,panel:t,load:o,data:n,incorrectOrder:l,multipleH1:_,noH1:c,handleLoad:a,itemInvalid:K}}};var $=function(){var e=this,t=e._self._c,o=e._self._setupProxy;return o.data?t("div",{staticClass:"k-section k-heading-structure"},[t("div",{staticClass:"k-field-header k-heading-structure__label k-label k-field-label"},[t("k-icon",{attrs:{type:"headline"}}),t("span",{staticClass:"k-label-text"},[e._v(e._s(o.props.label||e.$t("seo.sections.headingStructure.title")))])],1),t("k-box",{attrs:{theme:"white"}},[t("ol",{staticClass:"k-heading-structure__list"},e._l(o.data,function(n,l){return t("li",{key:l,class:`k-heading-structure__item level-${n.level} ${o.itemInvalid(n,l)?"is-invalid":""}`,style:`z-index: ${o.data.length-l}`},[t("span",{staticClass:"k-heading-structure__item__level"},[e._v(" H"+e._s(n.level)+" ")]),t("span",{staticClass:"k-heading-structure__item__text"},[e._v(e._s(n.text))])])}),0)]),o.incorrectOrder&&!o.noH1?t("k-box",{staticClass:"k-heading-structure__notice",attrs:{theme:"negative"}},[t("k-icon",{attrs:{type:"alert"}}),t("k-text",[e._v(e._s(e.$t("seo.sections.headingStructure.errors.incorrectOrder")))])],1):e._e(),o.multipleH1?t("k-box",{staticClass:"k-heading-structure__notice",attrs:{theme:"negative"}},[t("k-icon",{attrs:{type:"alert"}}),t("k-text",[e._v(e._s(e.$t("seo.sections.headingStructure.errors.multipleH1")))])],1):e._e(),o.noH1?t("k-box",{staticClass:"k-heading-structure__notice",attrs:{theme:"negative"}},[t("k-icon",{attrs:{type:"alert"}}),t("k-text",[e._v(e._s(e.$t("seo.sections.headingStructure.errors.missingH1")))])],1):e._e()],1):e._e()},R=[],x=u(y,$,R);const P=x.exports,H={__name:"facebook-preview",props:{ogTitle:String,url:String,ogDescription:String,ogImage:String},setup(r){const e=r,t=p(()=>new window.URL(e.url).host);return{__sfc:!0,props:e,host:t}}};var I=function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",[t("div",{staticClass:"k-facebook-preview"},[e.ogImage?t("div",{staticClass:"k-facebook-preview__image"},[t("img",{staticClass:"k-facebook-preview__img",attrs:{src:e.ogImage}})]):e._e(),t("div",{staticClass:"k-facebook-preview__content"},[t("span",{staticClass:"k-facebook-preview__url"},[e._v(e._s(o.host))]),t("span",{staticClass:"k-facebook-preview__title"},[e._v(e._s(e.ogTitle))]),t("p",{staticClass:"k-facebook-preview__description"},[e._v(e._s(e.ogDescription))])])]),t("a",{staticClass:"k-seo-preview__debugger",attrs:{href:"https://developers.facebook.com/tools/debug/","aria-label":"Facebook Sharing Debugger",target:"_blank",rel:"noopener noreferrer"}},[e._v(" "+e._s(e.$t("seo.sections.preview.openDebugger"))+" "),t("k-icon",{attrs:{type:"open"}})],1)])},Z=[],M=u(H,I,Z);const T=M.exports,V={__name:"google-preview",props:{title:String,url:String,description:String,ogSiteName:String},setup(r){const e=r,t=p(()=>new window.URL(e.url).origin),o=p(()=>new window.URL(e.url).pathname),n=p(()=>new window.URL(e.url).hostname),l=p(()=>{const _=o.value;if(!_||_==="/")return"";const c=_.split("/").filter(Boolean);return c.length===0?"":c.length===1?` › ${c[0]}`:` › ... › ${c[c.length-1]}`});return{__sfc:!0,props:e,origin:t,pathname:o,domain:n,breadcrumbs:l}}};var F=function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",[t("div",{staticClass:"k-google-search-preview"},[t("div",{staticClass:"k-google-search-preview__header"},[t("img",{staticClass:"k-google-search-preview__favicon",attrs:{src:`https://www.google.com/s2/favicons?domain=${o.domain.value}&sz=32`,alt:`${e.ogSiteName} favicon`}}),t("div",{staticClass:"k-google-search-preview__site-info"},[t("span",{staticClass:"k-google-search-preview__site-title"},[e._v(e._s(e.ogSiteName))]),t("span",{staticClass:"k-google-search-preview__url"},[e._v(" "+e._s(o.origin)+e._s(o.breadcrumbs)+" ")])])]),t("h3",{staticClass:"k-google-search-preview__title"},[e._v(e._s(e.title))]),e.description?t("p",{staticClass:"k-google-search-preview__description"},[e._v(" "+e._s(e.description)+" ")]):e._e()]),t("a",{staticClass:"k-seo-preview__debugger",attrs:{href:"https://search.google.com/search-console","aria-label":"Google Search Console",target:"_blank",rel:"noopener noreferrer"}},[e._v(" "+e._s(e.$t("seo.sections.preview.openSearchConsole"))+" "),t("k-icon",{attrs:{type:"open"}})],1)])},L=[],U=u(V,F,L);const D=U.exports,O={__name:"slack-preview",props:{ogTitle:String,ogSiteName:String,ogDescription:String,ogImage:String,url:String},setup(r){const e=r,t=p(()=>new window.URL(e.url).origin);return{__sfc:!0,props:e,origin:t}}};var A=function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{staticClass:"k-slack-preview"},[t("div",{staticClass:"k-slack-preview__content"},[t("div",{staticClass:"k-slack-preview__site-name"},[e._v(e._s(e.ogSiteName||o.origin))]),t("span",{staticClass:"k-slack-preview__title"},[e._v(e._s(e.ogTitle))]),t("p",{staticClass:"k-slack-preview__description"},[e._v(e._s(e.ogDescription))])]),e.ogImage?t("div",{staticClass:"k-slack-preview__image"},[t("img",{attrs:{src:e.ogImage}})]):e._e()])},N=[],B=u(O,A,N);const E=B.exports,j={__name:"seo-preview",props:b,setup(r){const e=r,t=m(),{load:o}=k(),n=g(null),l=g([]),_=g(window.localStorage.getItem("kSEOPreviewType")??"google");C(_,a=>{window.localStorage.setItem("kSEOPreviewType",a)});const c=()=>o({parent:e.parent,name:e.name}).then(a=>{n.value=a.meta,l.value=a.options,!window.localStorage.getItem("kSEOPreviewType")&&a.options.length>0&&(_.value=a.options[0].value)});return h(()=>{c(),t.events.on("content.save",a=>{c()})}),w(()=>t.events.off("content.save")),{__sfc:!0,props:e,panel:t,load:o,meta:n,options:l,type:_,handleLoad:c,FacebookPreview:T,GooglePreview:D,SlackPreview:E}}};var z=function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{staticClass:"k-section k-seo-preview"},[t("div",{staticClass:"k-field-header k-seo-preview__label k-label k-field-label"},[t("k-icon",{attrs:{type:"preview"}}),t("span",{staticClass:"k-label-text"},[e._v(" "+e._s(o.props.label||e.$t("seo.sections.preview.title"))+" ")])],1),t("k-select-field",{attrs:{type:"select",name:"seo-preview-type",before:e.$t("seo.sections.preview.showFor"),options:o.options,required:!0,empty:!1},model:{value:o.type,callback:function(n){o.type=n},expression:"type"}}),o.meta?t("div",{staticClass:"k-seo-preview__inner"},[o.type==="google"?t(o.GooglePreview,e._b({},"google-preview",o.meta,!1)):e._e(),o.type==="facebook"?t(o.FacebookPreview,e._b({},"facebook-preview",o.meta,!1)):e._e(),o.type==="slack"?t(o.SlackPreview,e._b({},"slack-preview",o.meta,!1)):e._e()],1):e._e()],1)},G=[],q=u(j,z,G);const J=q.exports;panel.plugin("tobimori/seo",{icons:{robots:'<path d="M13.5 2c0 .444-.193.843-.5 1.118V5h5a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V8a3 3 0 0 1 3-3h5V3.118A1.5 1.5 0 1 1 13.5 2ZM6 7a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H6Zm-4 3H0v6h2v-6Zm20 0h2v6h-2v-6ZM9 14.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm6 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" />',"robots-off":'<path fill-rule="evenodd" clip-rule="evenodd" d="M21 16.786V8a3 3 0 0 0-3-3h-5V3.118a1.5 1.5 0 1 0-2 0V5H9.214l2 2H18a1 1 0 0 1 1 1v6.786l2 2ZM2.093 3.507l2.099 2.099A2.995 2.995 0 0 0 3 8v10a3 3 0 0 0 3 3h12c.463 0 .902-.105 1.293-.292l1.9 1.9 1.414-1.415-6.88-6.88a1.5 1.5 0 1 0-2.04-2.04L3.508 2.093 2.093 3.507ZM5 8a1 1 0 0 1 .65-.937L17.585 19H6a1 1 0 0 1-1-1V8Zm-5 2h2v6H0v-6Zm24 0h-2v6h2v-6Zm-13.5 3a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" />'},sections:{"heading-structure":P,"seo-preview":J}})})();
